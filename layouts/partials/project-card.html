<article class="project-card">
  <div class="project-card__header">
    {{/* Status indicator */}}
    <span class="project-card__status project-card__status--{{ .Params.status | default "other" }}">
      {{ if eq .Params.status "active" }}
        <span class="status-dot status-dot--active"></span>
        {{ i18n "status_active" | default "Active" }}
      {{ else if eq .Params.status "completed" }}
        <span class="status-dot status-dot--completed"></span>
        {{ i18n "status_completed" | default "Completed" }}
      {{ else }}
        <span class="status-dot status-dot--completed"></span>
        {{ with .Params.status }}{{ . | title }}{{ else }}{{ i18n "project" | default "Project" }}{{ end }}
      {{ end }}
    </span>

    {{/* Website link */}}
    {{ with .Params.website }}
    <a href="{{ . }}" class="project-card__link" target="_blank" rel="noopener" title="{{ i18n "website" | default "Project website" }}">
      {{ partial "icons/icons.html" "external-link" }}
      <span class="visually-hidden">{{ i18n "website" | default "Project website" }}</span>
    </a>
    {{ end }}
  </div>

  <h3 class="project-card__title">
    <a href="{{ .Permalink }}">{{ .Title }}</a>
  </h3>

  {{ with .Description }}
  <p class="project-card__description">{{ . }}</p>
  {{ end }}

  <div class="project-card__meta">
    {{/* Role */}}
    {{ with .Params.role }}
    <div class="project-card__meta-item">
      {{ partial "icons/icons.html" "user" }}
      <span>{{ . }}</span>
    </div>
    {{ end }}

    {{/* Duration */}}
    {{ with .Params.duration }}
    <div class="project-card__meta-item">
      {{ partial "icons/icons.html" "calendar" }}
      <span>{{ . }}</span>
    </div>
    {{ end }}

    {{/* Grant ID */}}
    {{ with .Params.grant_id }}
    <div class="project-card__meta-item">
      <span class="project-card__grant">{{ . }}</span>
    </div>
    {{ end }}
  </div>

  {{/* Funding */}}
  {{ with .Params.funding }}
  <div class="project-card__funding">
    <span class="project-card__amount">{{ .amount }}</span>
    {{ with .agency }}
    <span class="project-card__agency">{{ . }}</span>
    {{ end }}
  </div>
  {{ end }}

  {{/* Partners */}}
  {{ with .Params.partners }}
  <div class="project-card__partners">
    {{ range . }}
    <span class="project-card__partner">{{ . }}</span>
    {{ end }}
  </div>
  {{ end }}
</article>

<style>
  .project-card {
    padding: var(--sp-5);
    background: var(--color-card-bg);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    transition: all var(--duration-normal) var(--ease-out);
  }

  .project-card:hover {
    border-color: var(--color-border-strong);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .project-card__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--sp-3);
  }

  .project-card__status {
    display: inline-flex;
    align-items: center;
    gap: var(--sp-2);
    font-size: var(--fs-xs);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: var(--ls-wide);
    color: var(--color-text-muted);
  }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  .status-dot--active {
    background: var(--color-success);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
    animation: pulse 2s infinite;
  }

  .status-dot--completed {
    background: var(--color-text-muted);
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .project-card__link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: var(--radius-md);
    color: var(--color-text-muted);
    transition: all var(--duration-fast) var(--ease-out);
  }

  .project-card__link:hover {
    background: var(--color-bg-alt);
    color: var(--color-accent);
  }

  .project-card__link svg {
    width: 18px;
    height: 18px;
  }

  .project-card__title {
    font-family: var(--font-serif);
    font-size: var(--fs-lg);
    font-weight: 600;
    line-height: var(--lh-snug);
    margin-bottom: var(--sp-2);
  }

  .project-card__title a {
    color: var(--color-text);
    text-decoration: none;
  }

  .project-card__title a:hover {
    color: var(--color-accent);
  }

  .project-card__description {
    font-size: var(--fs-sm);
    color: var(--color-text-secondary);
    line-height: var(--lh-relaxed);
    margin-bottom: var(--sp-4);
  }

  .project-card__meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--sp-3);
    margin-bottom: var(--sp-3);
  }

  .project-card__meta-item {
    display: inline-flex;
    align-items: center;
    gap: var(--sp-1);
    font-size: var(--fs-sm);
    color: var(--color-text-muted);
  }

  .project-card__meta-item svg {
    width: 14px;
    height: 14px;
    opacity: 0.7;
  }

  .project-card__grant {
    font-family: var(--font-mono);
    font-size: var(--fs-xs);
    padding: var(--sp-1) var(--sp-2);
    background: var(--color-bg-alt);
    border-radius: var(--radius-sm);
  }

  .project-card__funding {
    display: flex;
    flex-direction: column;
    gap: var(--sp-1);
    padding-top: var(--sp-3);
    border-top: 1px solid var(--color-border-subtle);
    margin-top: var(--sp-3);
  }

  .project-card__amount {
    font-size: var(--fs-lg);
    font-weight: 600;
    color: var(--color-accent);
  }

  .project-card__agency {
    font-size: var(--fs-xs);
    color: var(--color-text-faint);
  }

  .project-card__partners {
    display: flex;
    flex-wrap: wrap;
    gap: var(--sp-2);
    margin-top: var(--sp-3);
  }

  .project-card__partner {
    font-size: var(--fs-xs);
    padding: var(--sp-1) var(--sp-2);
    background: var(--color-bg-alt);
    border-radius: var(--radius-sm);
    color: var(--color-text-muted);
  }
</style>
