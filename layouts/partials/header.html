{{/* Header partial with responsive navigation */}}
<header class="header">
  <div class="header__inner">
    {{/* Logo / Site title */}}
    <a href="{{ .Site.BaseURL }}" class="header__logo">
      <svg class="header__logo-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        {{/* Graduation cap / mortarboard - academic symbol */}}
        <path d="M20 8L4 16L20 24L36 16L20 8Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <path d="M10 19V28C10 28 14 32 20 32C26 32 30 28 30 28V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M36 16V26" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <circle cx="36" cy="28" r="2" fill="currentColor"/>
      </svg>
      <span class="header__logo-text">{{ .Site.Title }}</span>
    </a>
    
    {{/* Desktop navigation */}}
    <nav class="nav" aria-label="Main navigation">
      {{ range .Site.Menus.main }}
        <a 
          href="{{ .URL }}" 
          class="nav__link{{ if $.IsMenuCurrent "main" . }} nav__link--active{{ end }}"
          {{ if strings.HasPrefix .URL "http" }}target="_blank" rel="noopener noreferrer"{{ end }}
        >
          {{ .Name }}
        </a>
      {{ end }}
    </nav>
    
    {{/* Header actions */}}
    <div class="header__actions">
      {{/* Language switcher */}}
      {{ if gt (len .Site.Languages) 1 }}
        <div class="lang-switcher">
          {{ $currentPage := . }}
          {{ range .Site.Languages }}
            {{ $lang := . }}
            {{ $url := "" }}
            {{/* Current language - use current page */}}
            {{ if eq $currentPage.Site.Language.Lang .Lang }}
              {{ $url = $currentPage.RelPermalink }}
            {{ else }}
              {{/* Check for translation of current page */}}
              {{ $found := false }}
              {{ range $currentPage.Translations }}
                {{ if eq .Lang $lang.Lang }}
                  {{ $url = .RelPermalink }}
                  {{ $found = true }}
                {{ end }}
              {{ end }}
              {{/* No translation - go to language home */}}
              {{ if not $found }}
                {{ if eq .Lang "en" }}
                  {{ $url = "/" }}
                {{ else }}
                  {{ $url = printf "/%s/" .Lang }}
                {{ end }}
              {{ end }}
            {{ end }}
            <a 
              href="{{ $url }}"
              class="lang-switcher__link{{ if eq $currentPage.Site.Language.Lang .Lang }} lang-switcher__link--active{{ end }}"
              lang="{{ .Lang }}"
              hreflang="{{ .Lang }}"
              title="{{ .LanguageName }}"
            >
              {{ with .Params.languageFlag }}{{ . }}{{ else }}{{ .Lang | upper }}{{ end }}
            </a>
          {{ end }}
        </div>
      {{ end }}
      
      {{/* Theme toggle */}}
      {{ if .Site.Params.theme.showThemeToggle | default true }}
        <button 
          class="theme-toggle" 
          id="theme-toggle" 
          aria-label="Toggle dark mode"
          title="Toggle dark mode"
        >
          {{/* Sun icon (shown in dark mode) */}}
          <svg class="theme-icon theme-icon--sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          {{/* Moon icon (shown in light mode) */}}
          <svg class="theme-icon theme-icon--moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
      {{ end }}
      
      {{/* Mobile menu toggle */}}
      <button 
        class="menu-toggle" 
        id="menu-toggle" 
        aria-label="Open menu"
        aria-expanded="false"
        aria-controls="mobile-menu"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>
</header>

<style>
  /* Theme toggle icon visibility */
  [data-theme="light"] .theme-icon--sun { display: none; }
  [data-theme="light"] .theme-icon--moon { display: block; }
  [data-theme="dark"] .theme-icon--sun { display: block; }
  [data-theme="dark"] .theme-icon--moon { display: none; }
  
  /* Auto mode follows system preference */
  @media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) .theme-icon--sun { display: block; }
    :root:not([data-theme="light"]) .theme-icon--moon { display: none; }
  }
  @media (prefers-color-scheme: light) {
    :root:not([data-theme="dark"]) .theme-icon--sun { display: none; }
    :root:not([data-theme="dark"]) .theme-icon--moon { display: block; }
  }
  
  .header__actions {
    display: flex;
    align-items: center;
    gap: var(--sp-1);
  }
  
  /* Language switcher - minimalist text style */
  .lang-switcher {
    display: flex;
    align-items: center;
    gap: 0;
    background: var(--color-bg-alt);
    border-radius: var(--radius-md);
    padding: 3px;
  }
  
  .lang-switcher__link {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--sp-1) var(--sp-2);
    font-size: var(--fs-xs);
    font-weight: 500;
    letter-spacing: 0.02em;
    text-decoration: none;
    border-radius: var(--radius-sm);
    color: var(--color-text-muted);
    transition: all var(--duration-fast) var(--ease-out);
  }
  
  .lang-switcher__link:hover {
    color: var(--color-text);
  }
  
  .lang-switcher__link--active {
    color: var(--color-text);
    background: var(--color-bg);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
  }
</style>
